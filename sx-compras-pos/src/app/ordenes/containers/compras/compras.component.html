<mat-card flex>
  <div layout layout-align="start center" class="pad-left-sm pad-right-sm">
    <span class="push-left-sm">
      <span class="mat-title">Compras</span>
    </span>
    <span flex></span>
    <td-search-box class="push-right-sm" placeholder="Filtrar" flex (searchDebounce)="onSearch($event)" [value]="search$ | async"
      [alwaysVisible]="(search$ | async)">
    </td-search-box>
    <sx-compras-filter (change)="onFilter($event)" [filter]="comprasFilter$ | async"></sx-compras-filter>
  </div>
  <mat-divider></mat-divider>
  <ng-container *ngIf="comprasPorSucursal$ | async as rows">
    <mat-tab-group [(selectedIndex)]="tabIndex">
      <mat-tab label="{{sucursal}}" *ngFor="let sucursal of getSucursales(rows)">
        <div class="compras-table-panel">
          <sx-compras-table [compras]="rows[sucursal]" [filter]="search$ | async" (edit)="onEdit($event)" (select)="onSelect($event)"
            [selected]="selected$ | async"></sx-compras-table>
        </div>
      </mat-tab>
    </mat-tab-group>
  </ng-container>
  <mat-card-footer *ngIf="comprasFilter$ | async as comprasFilter">
    <sx-compras-filter-label [filter]="comprasFilter"></sx-compras-filter-label>

  </mat-card-footer>
</mat-card>
<a mat-fab matTooltip="Nueva compra" matTooltipPosition="before" color="accent" class="mat-fab-position-bottom-left z-3"
  [routerLink]="['create']">
  <mat-icon>add</mat-icon>
</a>
<mat-card *ngIf="partidas$ | async as partidas">
  <div layout layout-align="start center" class="pad-left-sm pad-right-sm">
    <span flex></span>
    <button mat-icon-button (click)="clearSelection()">
      <mat-icon>close</mat-icon>
    </button>
  </div>
  <sx-compradet-table [partidas]="partidas" *ngIf="partidas.length > 0"></sx-compradet-table>
</mat-card>